<html>
    <head>
        <title>More Wizzo Examples</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
            .glasspane {
                z-index: 999;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                display: none;
                position: absolute;				
                background: rgba(0,0,0,.5);
            }
            .popup {
                z-index: 1000;
                position: absolute;
                background-color: white;
                border-style: solid;
                border-color: darkgrey;
                border-width: 4px;
                /* To align popup window at the center of screen*/
                top: 50%;
                left: 50%;
            }

            #progress {
                z-index: 1000;
                position: absolute;
                background-color: white;
                border-style: solid;
                border-color: darkgrey;
                border-width: 4px;
                top: 0%;
                left: 0%;

            </style>
            <script type="text/javascript">
                function pop(div) {
                    document.getElementById(div).style.display = 'block';
                }
                function hide(div) {
                    document.getElementById(div).style.display = 'none';
                }
            </script>

            <style>

                .content .right {
                    float: right;
                    width: 170px;
                    height: 100%;
                    border-style: solid;
                    border-color: white;
                    border-width: 1px;
                }
                .content .left {
                    margin-right: 170px;
                    height: 100%;
                    border-style: solid;
                    border-color: white;
                    border-width: 1px;
                }

                div.framed {
                    background-color: whitesmoke;
                    border-style: solid;
                    border-color: grey;
                    border-width: 2px;
                    //border-radius: 10px;
                    margin: 5px 5px 5px 5px;
                    min-height: 100px;
                    overflow:hidden;
                }

                .boxtitle {
                    margin: 15px 2px 2px 20px;
                }

                div.component {
                    background-color: linen;
                    margin: 4px 4px 4px 4px;
                    float: left;
                    border-style: solid;
                    border-width: 1px;
                    border-radius: 10px;
                    border-color: grey;
                    font-size: smaller;
                    width: 130px;
                }

                .component.over {
                    border-width: 4px;
                    margin: 1px 1px 1px 1px;
                }

                .workflow {
                    display: block;
                    margin-top: 0px;
                    margin-bottom: 0px;
                    margin-left: auto;
                    margin-right: auto;
                    max-width: 130px;
                }

                div.workflowcomponent {
                    background-color: linen;
                    border-style: solid;
                    border-width: 1px;
                    border-radius: 10px;
                    border-color: grey;
                    font-size: smaller;

                }

                #workflow {
                    min-height: 500px;
                    padding-top: 5px;
                    padding-bottom: 5px;
                }

                div.label {
                    text-align: center;
                    white-space: nowrap; 
                    overflow: hidden;
                    text-overflow: ellipsis;
                }

                div.centre
                {
                    //width: 200px;
                    display: block;
                }



            </style>

        </head>
        <body>

            <div class="content">
                <div class="right">
                    <h3 class="boxtitle">Workflow</h3>
                    <div id="workflow" class="framed">
                    </div>
                </div>
                <div class="left">
                    <h3 class="boxtitle">Available datasets</h3>
                    <div id="files" class="framed" title="Drop files here to load">
                    </div>

                    <h3 class="boxtitle">Calculation services</h3>
                    <div id="services" class="framed">
                    </div>

                    <h3 class="boxtitle">Other actions</h3>
                    <div id="otheractions" class="framed">
                    </div>

                </div>
            </div>

            <script type="text/javascript">
                function pop(div) {
                    document.getElementById(div).style.display = 'block';
                }
                function hide(div) {
                    document.getElementById(div).style.display = 'none';
                }
            </script>

            <script>
                var mock = false;
                var mockDataItems = [
                    {id: 1, name: "SDF 1", icon: "icons/Chemical-5-icon.png"},
                    {id: 2, name: "SDF 2", icon: "icons/Cube-Molecule-2-icon.png"},
                    {id: 3, name: "Document 23", icon: "icons/Document-icon.png"},
                    {id: 4, name: "Document 501"},
                    {id: 5, name: "SDF 6", icon: "icons/Cube-Molecule-icon.png"}
                ];
                var filesDiv = document.getElementById("files");
                var workflowDiv = document.getElementById("workflow");
                filesDiv.addEventListener("dragenter", doNotHandle, false);
                filesDiv.addEventListener("dragover", doNotHandle, false);
                filesDiv.addEventListener("drop", dropFile, false);
                workflowDiv.addEventListener("dragenter", doNotHandle, false);
                workflowDiv.addEventListener("dragover", doNotHandle, false);
                workflowDiv.addEventListener("drop", dropOntoWorkflow, false);
                window.addEventListener("load", reLoadDataItems, false);
                window.addEventListener("dragover", doNotHandle, false);
                window.addEventListener("drop", doNotHandle, false);
                function reLoadDataItems() {


                    while (filesDiv.hasChildNodes()) {
                        filesDiv.removeChild(filesDiv.lastChild);
                    }

                    console.log("Requesting data items");
                    var xhr = new XMLHttpRequest();
                    xhr.open("GET", "/rest/files/list", true);
                    xhr.overrideMimeType('text/plain; charset=x-user-defined-binary');
                    xhr.onload = function (oEvent) {
                        console.log("xhr.onload()");
                        var status = xhr.status;
                        if (status === 200) {
                            var allData = JSON.parse(xhr.responseText);
                            console.log("received response");
                            addDataItems(allData);
                        }
                    };
                    xhr.send();
                }


                function addDataItems(dataItems) {
                    for (var i = 0; i < dataItems.length; i++) {
                        var item = dataItems[i];
                        addDataItem(item);
                    }
                }

                function addDataItem(item) {
                    console.log("Ading data item " + item);
                    console.log("ID= " + item.id + " name=" + item.name);
                    var div = document.createElement("div");
                    div.id = item.id;
                    div.item = item;
                    div.draggable = true;
                    div.className = "component droptarget";
                    div.title = item.name;
                    var img = document.createElement("img");
                    img.src = findIcon(item, "icons/Chemical-5-icon.png");
                    img.width = 72;
                    img.height = 72;
                    img.draggable = false;
                    div.appendChild(img);
                    div.appendChild(document.createElement("br"));
                    var label = document.createElement("div");
                    label.className = "label";
                    label.innerHTML = item.name;
                    div.appendChild(label);
                    filesDiv.appendChild(div);
                    console.log("Item added");
                    div.addEventListener("dragenter", handleDragEnter, false);
                    div.addEventListener("dragleave", handleDragLeave, false);
                    div.addEventListener('dragstart', function (e) {
                        e.dataTransfer.setData('DataItemID', e.target.id);
                    }, false);
                    div.addEventListener("drop", dropOntoDataItem, false);
                }


                var servicesItems = [
                    {id: "Calculate LogP",
                        popup: "basic-params-service-submit",
                        form: "basic-service-submit-form",
                        path: "/process",
                        endpoint: "direct:logp",
                        icon: "icons/Programming-Add-Property-icon.png"},
                    {id: "Lipinski props",
                        popup: "basic-params-service-submit",
                        form: "basic-service-submit-form",
                        path: "/process",
                        endpoint: "direct:lipinski",
                        icon: "icons/Programming-Add-Property-icon.png"},
                    {id: "Drug like filter",
                        popup: "basic-params-service-submit",
                        form: "basic-service-submit-form",
                        path: "/process",
                        endpoint: "direct:filter_example",
                        icon: "icons/Filter-List-icon.png"},
                    {id: "ECFP4 screen",
                        popup: "screening-service-submit",
                        form: "screening-service-submit-form",
                        path: "/process",
                        endpoint: "direct:screening/ecfp",
                        icon: "icons/Filter-List-icon.png"},
                    {id: "Pharmacophore screen",
                        popup: "screening-service-submit",
                        form: "screening-service-submit-form",
                        path: "/process",
                        endpoint: "direct:screening/pharmacophore",
                        icon: "icons/Filter-List-icon.png"},
                    {id: "Spherex Clustering",
                        popup: "spherex-clustering-service-submit",
                        form: "spherex-clustering-service-submit-form",
                        path: "/process",
                        endpoint: "direct:clustering/spherex/ecfp4"}
                ];
                var servicesDiv = document.getElementById("services");
                for (var i = 0; i < servicesItems.length; i++) {
                    var service = servicesItems[i];
                    var div = document.createElement("div");
                    div.id = service.id;
                    div.service = service;
                    div.className = "component droptarget";
                    div.draggable = true;
                    var img = document.createElement("img");
                    img.src = findIcon(service, "icons/Very-Basic-Services-icon.png");
                    img.draggable = false;
                    img.width = 72;
                    img.height = 72;
                    div.appendChild(img);
                    div.appendChild(document.createElement("br"));
                    var label = document.createElement("div");
                    label.className = "label";
                    label.innerHTML = service.id;
                    div.appendChild(label);
                    servicesDiv.appendChild(div);
                    div.addEventListener("dragenter", handleDragEnter, false);
                    div.addEventListener("dragleave", handleDragLeave, false);
                    div.addEventListener("dragover", doNotHandle, false);
                    div.addEventListener("drop", dropOntoService, false);
                    div.addEventListener('dragstart', function (e) {
                        e.dataTransfer.setData('ServiceID', e.target.id);
                    }, false);
                }

                var otherActionItems = [
                    {id: "Delete", path: "/files/delete", icon: "icons/Household-Waste-icon.png"},
                    {id: "Export", path: "/files/download", handler: handleFileDownload, icon: "icons/export-icon.png"},
                    {id: "View", icon: "icons/spreadsheet-icon.png"}
                ];
                var servicesDiv = document.getElementById("otheractions");
                for (var i = 0; i < otherActionItems.length; i++) {
                    var service = otherActionItems[i];
                    var div = document.createElement("div");
                    div.id = service.id;
                    div.service = service;
                    div.className = "component droptarget";
                    var img = document.createElement("img");
                    img.src = findIcon(service, "icons/Very-Basic-Services-icon.png");
                    img.draggable = false;
                    img.width = 72;
                    img.height = 72;
                    div.appendChild(img);
                    div.appendChild(document.createElement("br"));
                    var label = document.createElement("div");
                    label.className = "label"
                    label.innerHTML = service.id;
                    div.appendChild(label);
                    servicesDiv.appendChild(div);
                    div.addEventListener("dragenter", handleDragEnter, false);
                    div.addEventListener("dragleave", handleDragLeave, false);
                    div.addEventListener("dragover", doNotHandle, false);
                    var dropHandler = service.handler;
                    if (dropHandler === undefined) {
                        dropHandler = dropOntoService;
                    }
                    div.addEventListener("drop", dropHandler, false);
                }

                function findIcon(obj, defaultIcon) {
                    var src = obj.icon;
                    if (src === undefined) {
                        return defaultIcon;
                    } else {
                        return src;
                    }
                }

                function doNotHandle(e) {
                    e.stopPropagation();
                    e.preventDefault();
                }

                function handleDragEnter(e) {
                    this.classList.add('over');
                }

                function handleDragLeave(e) {
                    this.classList.remove('over');
                }

                function dropOntoWorkflow(e) {
                    console.log("Item dropped onto workflow");
                    e.stopPropagation();
                    e.preventDefault();
                    var dt = e.dataTransfer;
                    var serviceID = dt.getData('ServiceID');
                    var dataItemID = dt.getData('DataItemID');
                    if (serviceID.length > 0) {
                        console.log("Handling service " + serviceID);
                        handleWorkflowDropService(serviceID);
                    } else if (dataItemID.length > 0) {
                        console.log("handling data item");
                        var dataId = dt.getData('dataItemID');
                        handleWorkflowDataItem(dataId);
                    }
                }

                function handleWorkflowDataItem(dataItemID) {
                    console.log("Handling workflow data item " + dataItemID);
                    var dataItemDiv = document.getElementById(dataItemID);
                    var dataItem = dataItemDiv.item;
                    var div = document.createElement("div");
                    div.id = dataItem.id;
                    div.item = dataItem;
                    div.draggable = false;
                    div.className = "workflow workflowcomponent";
                    div.title = dataItem.name;
                    var img = document.createElement("img");
                    img.src = dataItemDiv.childNodes[0].src;
                    img.draggable = false;
                    img.width = 72;
                    img.height = 72;
                    div.appendChild(img);
                    div.appendChild(document.createElement("br"));
                    var label = document.createElement("div");
                    label.className = "label";
                    label.innerHTML = dataItem.name;
                    div.appendChild(label);
                    workflowDiv.appendChild(div);
                }

                function handleWorkflowDropService(serviceID) {
                    console.log("Handling workflow service " + serviceID);
                    var serviceDiv = document.getElementById(serviceID);
                    var arrow = document.createElement("img");
                    arrow.src = "icons/Down-Arrow-icon.png";
                    arrow.draggable = false;
                    arrow.width = 32;
                    arrow.height = 32;
                    arrow.align = "middle";
                    arrow.className = "workflow";
                    workflowDiv.appendChild(arrow);
                    var div = document.createElement("div");
                    div.id = serviceDiv.id;
                    div.service = serviceDiv.service;
                    div.draggable = false;
                    div.className = "workflow workflowcomponent";
                    div.title = serviceDiv.name;
                    var img = document.createElement("img");
                    img.src = serviceDiv.childNodes[0].src;
                    img.draggable = false;
                    img.width = 72;
                    img.height = 72;
                    div.appendChild(img);
                    div.appendChild(document.createElement("br"));
                    var label = document.createElement("div");
                    label.className = "label";
                    label.innerHTML = serviceDiv.id;
                    div.appendChild(label);
                    workflowDiv.appendChild(div);
                }

                function dropOntoDataItem(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    this.classList.remove('over');
                    var dataItemDiv = findDropDiv(e.target, "droptarget");
                    if (dataItemDiv === undefined) {
                        console.log("Data item not found");
                        return;
                    }
                    var dt = e.dataTransfer;
                    var serviceId = dt.getData('ServiceID');
                    var serviceDiv = document.getElementById(serviceId);
                    if (serviceDiv === undefined) {
                        console.log("Service not found");
                        return;
                    }
                    console.log("Dropped " + serviceDiv.id + " onto " + dataItemDiv.id);
                    console.log("Data item is " + dataItemDiv.item);
                    console.log("Service is " + serviceDiv.service);
                    handleDataItemServiceDrop(dataItemDiv.item, serviceDiv.service);
                    return false;
                }

                function handleFileDownload(e) {
                    console.log("Handling File Download");
                    e.stopPropagation();
                    e.preventDefault();
                    this.classList.remove('over');
                  
                    var dt = e.dataTransfer;
                    var dataId = dt.getData('DataItemID');
                    if (dataId === undefined) {
                        console.log("No DataItem defined")
                        return;
                    }
                    
                    window.open("/files/download?item=" + dataId);

                    
                    return false;
                }

                function dropOntoService(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    this.classList.remove('over');
                    var serviceDiv = findDropDiv(e.target, "droptarget");
                    var dt = e.dataTransfer;
                    var dataId = dt.getData('DataItemID');
                    var itemDiv = document.getElementById(dataId);
                    handleDataItemServiceDrop(itemDiv.item, serviceDiv.service);
                    return false;
                }

                function handleDataItemServiceDrop(dataItem, service) {
                    console.log("Running service " + service.id + " for data " + dataItem.name);
                    var path = service.path;
                    if (path === undefined) {
                        alert("Service not yet implemented");
                        return;
                    }
                    var formName = service.form;
                    if (formName === undefined) {
                        var noParamsForm = document.getElementById("no-params-service-submit");
                        populateServiceRequestForm(noParamsForm, dataItem, service);
                        handleServiceRequest("no-params-service-submit");
                    } else {
                        var form = document.getElementById(service.form);
                        populateServiceRequestForm(form, dataItem, service);
                        console.log("Showing popup");
                        pop(service.popup);
                        console.log("Popup handled");
                    }
                }

                function handleServiceRequest(formId) {
                    var form = document.getElementById(formId);
                    console.log("Form ID is " + formId + ", form is " + form);
                    var formData = new FormData();
                    var path;
                    for (var i = 0; i < form.elements.length; i++) {
                        var el = form.elements[i];
                        console.log("Handling element " + el.name);
                        if (el.name === "inputName") {
                            // do nothing
                        } else if (el.name === "itemId") {
                            formData.append("item", el.value);
                            console.log("Item ID set to " + el.value);
                        } else if (el.name === "serviceEndpoint") {
                            formData.append("endpoint", el.value);
                            console.log("Endpoint set to " + el.value);
                        } else if (el.name === "outputName") {
                            formData.append("itemName", el.value);
                            console.log("New name set to " + el.value);
                        } else if (el.name === "path") {
                            path = el.value;
                            console.log("Path set to " + el.value);
                        } else if (el.name !== undefined) {
                            formData.append(el.name, el.value);
                            console.log(el.name + " set to " + el.value);
                        }

                    }
                    if (path === undefined) {
                        return;
                    }

                    var prog = createProgress("Processing");
                    pop("progress");

                    var xhr = new XMLHttpRequest();
                    xhr.open("POST", path, true);
                    xhr.onload = function () {
                        hide("progress");
                        var status = xhr.status;
                        if (status === 200) {
                            console.log("Processing OK");
                            var json = xhr.response;
                            console.log("JSON: " + json);
                            if (json === undefined || json.length === 0) {
                                // delete should have its own handler. This is messy.
                                console.log("Reloading");
                                reLoadDataItems();
                            } else {
                                console.log("We have some JSON: " + json);
                                var items = JSON.parse(json);
                                if (items.length > 0) {
                                    console.log("Adding items");
                                    addDataItems(items);
                                } else {
                                    alert("No results!");
                                }
                            }
                        } else {
                            alert("Processing failed");
                        }
                    };
                    console.log("Posting request to " + path);
                    //alert("Posting");
                    xhr.send(formData);
                    //alert("Posted");
                }

                function createProgress(name, max) {
                    var div = document.getElementById("progress");
                    while (div.hasChildNodes()) {
                        div.removeChild(div.lastChild);
                    }
                    var span = document.createElement("span");
                    span.innerHTML = name + ":&nbsp;";
                    div.appendChild(span);
                    var prog = document.createElement("progress");
                    div.appendChild(prog);
                    if (max !== undefined) {
                        prog.max = max;
                        prog.value = 0;
                    }
                    return prog;
                }

                function dropFile(e) {
                    console.log("File dropped?");
                    e.stopPropagation();
                    e.preventDefault();
                    var prog = createProgress("File upload", 100);
                    pop("progress");
                    var files = e.dataTransfer.files; // Array of all files
                    //for (var i = 0, file; file = files[i]; i++) {
                    for (var i = 0; i < files.length; i++) {
                        var file = files[i];
                        var name = file.name;
                        console.log("Dropped file 1 " + name + " - " + file);
                        var formData = new FormData();
                        formData.append('file', file, file.name);
                        var xhr = new XMLHttpRequest();
                        xhr.open("POST", "/files/upload", true);
                        xhr.onload = function () {
                            hide("progress");
                            var status = xhr.status;
                            if (status === 200) {
                                var json = xhr.response;
                                var results = JSON.parse(json);
                                addDataItems(results);
                            } else {
                                alert("File load failed");
                            }
                        };
                        xhr.upload.addEventListener("progress", function (e) {
                            if (e.lengthComputable) {
                                var percentage = Math.round((e.loaded * 100) / e.total);
                                console.log("Progress: " + e + " | " + percentage);
                                prog.value = percentage;
                            }
                        }, false);
                        xhr.upload.addEventListener("load", function (e) {
                            prog.value = 100;
                            prog = createProgress("Processing");
                        }, false);
                        xhr.upload.addEventListener("error", function (e) {
                            hide("progress");
                            altert("Error encountered uploading file");
                        }, false);
                        xhr.send(formData);
                    }
                    return false;
                }

                function findDropDiv(target, cls) {
                    if (target === undefined) {
                        return null;
                    } else if (target.classList.contains(cls)) {
                        return target;
                    } else if (target.parentNode === undefined) {
                        return null;
                    } else {
                        return findDropDiv(target.parentNode, cls);
                    }
                }

                function populateServiceRequestForm(form, item, service) {
                    form.reset();
                    setFormProperty(form, "path", service.path);
                    setFormProperty(form, "serviceEndpoint", service.endpoint);
                    setFormProperty(form, "serviceName", service.id);
                    setFormProperty(form, "inputName", item.name);
                    setFormProperty(form, "itemId", item.id);
                    setFormProperty(form, "outputName", "");
                }

                function setFormProperty(form, propName, value) {
                    if (form[propName] !== undefined) {
                        form[propName].value = value;
                    }
                }
            </script>

            <div id="basic-params-service-submit" class="glasspane">
                <div class="popup" style="width: 300px; height: 200px; margin-top: -100px; margin-left: -150px;">
                    <div style="text-align: right;">
                        <a href="#" onClick="hide('basic-params-service-submit')">X</a>
                    </div>
                    <div>
                        <form id="basic-service-submit-form">
                            <input type="text" name="itemId" hidden disabled>
                            <input type="text" name="serviceEndpoint" hidden disabled>
                            <input type="text" name="path" hidden disabled>
                            <div>
                                <table cellpadding="3">
                                    <tr><td>Service:</td><td><input type="text" name="serviceName" size="20" disabled value=""></td></tr>
                                    <tr><td>Name of input:</td><td><input type="text" name="inputName" size="20" disabled value=""></td></tr>
                                    <tr><td>Name of output:</td><td><input type="text" name="outputName" size="20" value="" autofocus></td></tr>
                                </table>
                            </div>
                            <div style="position:absolute; right: 10px; bottom: 10px;">
                                <button type="button" onclick="hide('basic-params-service-submit');
                                        handleServiceRequest('basic-service-submit-form')">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="spherex-clustering-service-submit" class="glasspane">
                <div class="popup" style="width: 300px; height: 200px; margin-top: -100px; margin-left: -150px;">
                    <div style="text-align: right;">
                        <a href="#" onClick="hide('spherex-clustering-service-submit')">X</a>
                    </div>
                    <div>
                        <form id="spherex-clustering-service-submit-form">
                            <input type="text" name="itemId" hidden disabled>
                            <input type="text" name="serviceEndpoint" hidden disabled>
                            <input type="text" name="path" hidden disabled>
                            <div>
                                <table cellpadding="3">
                                    <tr><td>Service:</td><td><input type="text" name="serviceName" size="20" disabled value=""></td></tr>
                                    <tr><td>Name of input:</td><td><input type="text" name="inputName" size="20" disabled value=""></td></tr>
                                    <tr><td>Name of output:</td><td><input type="text" name="outputName" size="20" value="" autofocus></td></tr>
                                    <tr><td>Min clusters:</td><td><input type="text" name="MinClusterCount" size="5" value="5"></td></tr>
                                    <tr><td>Max clusters:</td><td><input type="text" name="MaxClusterCount" size="5" value="10"></td></tr>
                                </table>
                            </div>
                            <div style="position:absolute; right: 10px; bottom: 10px;">
                                <button type="button" onclick="hide('spherex-clustering-service-submit');
                                        handleServiceRequest('spherex-clustering-service-submit-form');">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="screening-service-submit" class="glasspane">
                <div class="popup" style="width: 400px; height: 200px; margin-top: -100px; margin-left: -200px;">
                    <div style="text-align: right;">
                        <a href="#" onClick="hide('screening-service-submit')">X</a>
                    </div>
                    <div>
                        <form id="screening-service-submit-form">
                            <input type="text" name="itemId" hidden disabled>
                            <input type="text" name="serviceEndpoint" hidden disabled>
                            <input type="text" name="path" hidden disabled>
                            <div>
                                <table cellpadding="3">
                                    <tr><td>Service:</td><td><input type="text" name="serviceName" size="20" disabled value=""></td></tr>
                                    <tr><td>Name of input:</td><td><input type="text" name="inputName" size="20" disabled value=""></td></tr>
                                    <tr><td>Name of output:</td><td><input type="text" name="outputName" size="20" value="" autofocus></td></tr>
                                    <tr><td>Target structure:</td><td><input type="text" name="TargetMolecule" size="40" value="NC1=CC=CC(NC2=NC=CC=N2)=C1"></td></tr>
                                    <tr><td>Threshold:</td><td><input type="text" name="Threshold" size="5" value="0.8"></td></tr>
                                </table>
                            </div>
                            <div style="position:absolute; right: 10px; bottom: 10px;">
                                <button type="button" onclick="hide('screening-service-submit');
                                        handleServiceRequest('screening-service-submit-form');">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>


            <div style="display: none;">
                <form id="no-params-service-submit">
                    <input type="text" name="itemId" hidden disabled>
                    <input type="text" name="path" hidden disabled>
                </form>
            </div>

            <div id="progress" class="popup" style="display: none; position: absolute;">

            </div>

        </body>
    </html>
